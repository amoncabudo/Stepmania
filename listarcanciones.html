<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lista de Canciones</title>
    <link rel="stylesheet" href="src/CSS/style.css">
</head>
<body>
    <header class="header">
        <a href="#" class="logo">ᚠ</a>
        <a href="index.html" class="home-button"><ion-icon name="home"></ion-icon></a>
    </header>

    <div id="playlist-container">
        <section id="songsList">
            <!-- Aquí se cargarán las canciones -->
        </section>
    </div>

    <script>
        // Leer el archivo JSON y mostrar las canciones
        fetch('src/PHP/playlist.json')  // Ruta correcta al archivo JSON
            .then(response => {
                if (!response.ok) {
                    throw new Error('Error al cargar el archivo JSON.');
                }
                return response.json();
            })
            .then(data => {
                const songsList = document.querySelector('#songsList');

                data.forEach(cancion => {
                    // Crear un contenedor para cada canción
                    const songContainer = document.createElement('div');
                    songContainer.classList.add('song-container');

                    // Crear la imagen de la carátula
                    const caratula = document.createElement('img');
                    caratula.src = 'src/PHP/' + cancion.archivoCaratula;  // Ruta a la carátula
                    caratula.alt = `Carátula de ${cancion.titulo}`;
                    caratula.classList.add('song-img');

                    // Crear el contenedor de información de la canción
                    const songInfo = document.createElement('div');
                    songInfo.classList.add('song-info');
                    songInfo.innerHTML = `
                        <h2>${cancion.titulo}</h2>
                        <p>de ${cancion.artista}</p>
                    `;

                    // Crear el reproductor de audio
                    const audioPlayer = document.createElement('audio');
                    audioPlayer.controls = true;
                    const source = document.createElement('source');
                    source.src = 'src/PHP/' + cancion.archivoMusica;  // Ruta al archivo de música
                    source.type = "audio/mpeg";
                    audioPlayer.appendChild(source);
                    audioPlayer.innerHTML = "Tu navegador no soporta el elemento de audio.";

                    // Añadir los elementos al contenedor de la canción
                    songContainer.appendChild(caratula);
                    songContainer.appendChild(songInfo);
                    songContainer.appendChild(audioPlayer);

                    // Añadir la nueva canción al listado
                    songsList.appendChild(songContainer);
                });
            })
            .catch(error => {
                console.error('Error al cargar el JSON:', error);
                document.querySelector('#songsList').innerHTML = '<p>No se pudieron cargar las canciones. Inténtalo más tarde.</p>';
            });
    </script>

    <script type="module" src="https://unpkg.com/ionicons@4.5.10-0/dist/ionicons/ionicons.esm.js"></script>
    <script nomodule="" src="https://unpkg.com/ionicons@4.5.10-0/dist/ionicons/ionicons.js"></script>
</body>
</html>
